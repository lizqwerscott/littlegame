{"version":3,"file":"bundle.js","sources":["../../src/Main.ts"],"sourcesContent":["import {fork} from \"child_process\";\r\n\r\nvar score = 0;\r\n\r\nclass Main {\r\n\r\n\r\n\tconstructor() {\r\n\t\t\r\n\t\t// 这里是游戏具体代码\r\n\t\tthis._startGame()\r\n\t}\r\n\tprivate _startGame() {\r\n\t\tlet config = {\r\n\t\t\ttype: Phaser.AUTO,\r\n\t\t\twidth: 800,\r\n\t\t\theight: 600,\r\n\t\t\tphysics: {\r\n\t\t\t\tdefault: 'arcade',\r\n\t\t\t\tarcade: {\r\n\t\t\t\t\tgravity: { y: 300 },\r\n                    debug: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscene: [HomeScene, FinishScene]\r\n\t\t}\r\n\r\n\t\tvar game = new Phaser.Game(config);\r\n\t\t\r\n\t}\r\n\r\n\r\n}\r\n\r\nclass FinishScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: 'FinishScene'\r\n        })\r\n    }\r\n\r\n    init() {\r\n\r\n    }\r\n\r\n    preload() {\r\n\r\n    }\r\n\r\n    create() {\r\n        this.add.text(285, 300, \"You are Wasted!\", {\r\n            fontSize: \"30px\",\r\n            color: \"#ff0000\"\r\n        });\r\n        this.add.text(285, 340, \"You score: \" + score, {\r\n            fontSize: \"30px\",\r\n            color: \"#ff0000\"\r\n        });\r\n    }\r\n\r\n    update() {\r\n\r\n    }\r\n}\r\n\r\nclass HomeScene extends Phaser.Scene{\r\n\tconstructor(){\r\n\t\tsuper({\r\n\t\t\tkey:'HomeScene'\r\n\t\t})\r\n\t}\r\n\r\n    platforms: Phaser.Physics.Arcade.StaticGroup;\r\n    //player = Phaser.Physics.Arcade.Sprite;\r\n    isDead: Boolean;\r\n    player: Phaser.Physics.Arcade.Sprite;\r\n    showScore: Phaser.GameObjects.Text;\r\n\r\n    groundIndex: number;\r\n\r\n\tinit(){\r\n        this.groundIndex = 0;\r\n        this.isDead = false;\r\n\t}\r\n\tpreload(){\r\n\t\t//this.load.setBaseURL('http://labs.phaser.io');\r\n\r\n        //this.load.image('sky', 'assets/skies/space3.png');\r\n        //this.load.image('logo', 'assets/sprites/phaser3-logo.png');\r\n        //this.load.image('red', 'assets/particles/red.png');\r\n        this.load.image('sky', 'assets/sky.png');\r\n        //this.load.image('ground', 'assets/platform.png');\r\n        this.load.image('star', 'assets/star.png');\r\n        this.load.image('bomb', 'assets/bomb.png');\r\n        this.load.image('stonep', 'assets/stonePlatform.png');\r\n        this.load.spritesheet('dude',\r\n                             'assets/dude.png',\r\n                             {frameWidth: 32, frameHeight: 48});\r\n\t}\r\n\tcreate ()\r\n    {\r\n        this.add.image(400, 300, 'sky');\r\n        this.showScore = this.add.text(0, 0, \"score: \" + score);\r\n        //this.add.image(400, 400, 'star');\r\n\r\n        this.platforms = this.physics.add.staticGroup();\r\n\r\n        this.platforms.create(400, 568, 'stonep').setName(\"groundStone0\");\r\n\r\n        for (let i = 40; i < 548; i = i + 80) {\r\n            this.autoGenerateGround(i);\r\n        }\r\n\r\n        //var groundMain = this.platforms.create(400, 568, 'ground').setName(\"ground1\");\r\n        //groundMain.setScale(2).refreshBody();\r\n        //this.platforms.create(600, 400, 'ground').setName(\"ground2\");\r\n        //this.platforms.create(50, 250, 'ground').setName(\"ground3\");\r\n        //this.platforms.create(750, 220, 'ground').setName(\"ground4\");\r\n\r\n        this.player = this.physics.add.sprite(400, 500, 'dude');\r\n        this.player.setBounce(0.2);\r\n        this.player.setCollideWorldBounds(false);\r\n        this.player.setName(\"player\")\r\n\r\n        this.anims.create({\r\n            key: 'left',\r\n            frames: this.anims.generateFrameNumbers('dude', {\r\n                start: 0,\r\n                end : 3\r\n            }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n        });\r\n\r\n        this.anims.create({\r\n            key: 'turn',\r\n            frames: [{ key: 'dude', frame: 4}],\r\n            frameRate: 20\r\n        });\r\n\r\n        this.anims.create({\r\n            key: 'right',\r\n            frames: this.anims.generateFrameNumbers('dude', {\r\n                start: 5,\r\n                end: 8\r\n            }),\r\n            frameRate: 10,\r\n            repeat: -1\r\n        });\r\n\r\n        var collider = this.physics.add.collider(this.player, this.platforms);\r\n        collider.collideCallback = this.collectGround;\r\n        //this.physics.add.overlap(this.player, this.platforms, this.collectGround, null, this);\r\n    }\r\n\r\n    update(time, delta) {\r\n        var cursors = this.input.keyboard.createCursorKeys();\r\n        if (cursors.left.isDown) {\r\n            this.player.setVelocityX(-160);\r\n            this.player.anims.play('left', true);\r\n        } else if (cursors.right.isDown) {\r\n            this.player.setVelocityX(160);\r\n            this.player.anims.play('right', true);\r\n        } else {\r\n            this.player.setVelocityX(0);\r\n            this.player.anims.play('turn');\r\n        }\r\n\r\n        /*\r\n        if (cursors.up.isDown && this.player.body.touching.down) {\r\n            this.player.setVelocityY(-330);\r\n        }\r\n        */\r\n        if (this.player.body.touching.down) {\r\n            this.player.setVelocityY(-330);\r\n            score += 80;\r\n            this.platforms.incY(80);\r\n            this.autoGenerateGround(25);\r\n            this.platforms.refresh();\r\n        }\r\n\r\n        //console.log(\"time: \" + time);\r\n        //console.log(\"delta: \" + delta);\r\n\r\n        if (this.player.y > 610) {\r\n            this.isDead = true;\r\n        }\r\n\r\n        if (this.isDead) {\r\n            this.scene.stop();\r\n            this.scene.run(\"FinishScene\");\r\n        }\r\n\r\n        this.platforms.children.each((ground : Phaser.GameObjects.GameObject) => {\r\n            if (ground.body.position.y > 610) {\r\n                console.log(\"deleteGround: \", ground.name);\r\n                this.platforms.remove(ground);\r\n            }\r\n        });\r\n\r\n\r\n        this.showScore.text = \"score: \" + score;\r\n    }\r\n\r\n    randomX() {\r\n        return Math.random() * 700 + 30\r\n    }\r\n\r\n    autoGenerateGround(y: number) {\r\n        this.platforms.create(this.randomX(), y, 'stonep').setName(\"stoneGround\" + this.groundIndex);\r\n        this.groundIndex++;\r\n    }\r\n\r\n    collectGround(object1: Phaser.GameObjects.GameObject, object2: Phaser.GameObjects.GameObject) {\r\n        //console.log(\"platform:\" + object1.name)\r\n        //console.log(\"platform:\" + object2.name)\r\n    }\r\n\r\n}\r\n\r\n//激活启动类\r\nnew Main();\r\n"],"names":[],"mappings":"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"}